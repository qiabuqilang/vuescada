!function(u,M){"use strict";var s="ht",C=u[s],k="position",Y="absolute",m="px",i="left",E="top",w="innerHTML",A="className",N="width",c="height",V="0",d="display",f="none",U="visibility",T="user-select",B="margin",y="padding",L=null,P=C.Color,n=C.Default,_=n.getInternal(),Z=u.setTimeout,p=u.setInterval,x=u.clearTimeout,H=u.clearInterval,R=u.parseInt,G=n.isLeftButton,v=n.isDragging,F=n.startDragging,b=n.getDistance,J=n.isTouchable,Q=P.widgetIconHighlight,r=P.widgetIconBorder,h=P.widgetIconGradient,$=function(){return document},o=function(B,O){return B.querySelectorAll(O)},e=function(C){var u=$().createElement(C);return"ul"===C&&(a(u,k,"relative"),a(u,B,V),a(u,y,V),a(u,"list-style",f),a(u,"box-sizing","border-box"),a(u,"-moz-box-sizing","border-box"),a(u,d,"inline-block"),a(u,"vertical-align","text-bottom"),a(u,"border","1px solid "+n.contextMenuBorderColor),a(u,"box-shadow","0 0 16px 1px "+n.contextMenuShadowColor),a(u,"overflow","hidden"),n.contextMenuBorderRadius&&a(u,"border-radius",n.contextMenuBorderRadius+m)),u},K=function(M){var U=M.touches[0];return U?U:M.changedTouches[0]},q=function(){return e("div")},g=function(){return e("canvas")},a=function(r,F,d){r.style.setProperty(F,d,L)},W=function(P,U,A){n.def(C.widget[P],U,A)},t=function(P,k){P.appendChild(k)},O=function(e,O){e.removeChild(O)},z=n.eventListenerOptionsFalse,X=(n.eventListenerOptionsTrue,function(M,C,l,K){M.addEventListener(C,l,K?z:z)}),I=function(o,r,X,t){o.removeEventListener(r,X,t?z:z)};_.addMethod(n,{contextMenuCheckIcon:{width:16,height:16,comps:[{type:"border",rect:[1,1,14,14],width:1,color:r},{type:"shape",points:[13,3,7,12,4,8],borderWidth:2,borderColor:Q}]},contextMenuRadioIcon:{width:16,height:16,comps:[{type:"circle",rect:[2,2,12,12],borderWidth:1,borderColor:r},{type:"circle",rect:[4,4,8,8],borderWidth:1,borderColor:Q,gradient:n.imageGradient,gradientColor:h,background:Q}]},contextMenuLabelFont:(J?"16":"13")+"px arial, sans-serif",contextMenuLabelColor:"#000",contextMenuBackground:"#fff",contextMenuDisabledLabelColor:"#888",contextMenuHoverBackground:"#648BFE",contextMenuHoverLabelColor:"#fff",contextMenuSeparatorWidth:1,contextMenuSeparatorColor:"#E5E5E5",contextMenuScrollerColor1:"#FDFDFD",contextMenuScrollerColor2:"#D3D3D3",contextMenuScrollerBorderColor:"#C3C3C3",contextMenuBorderColor:"#C3C3C3",contextMenuShadowColor:"rgba(128, 128, 128, 0.5)",contextMenuBorderRadius:5,contextMenuSubmenuMark:"▶"},!0);var j=function(U){var c=this,n=U._view;if(c.$11b=U,c.addListeners(),X(n,"contextmenu",function(v){v.preventDefault()}),!J){var u=c.$37b=c.$36b.bind(c);X(n,"mouseover",u),X(n,"mouseout",u)}};n.def(j,M,{ms_listener:1,getView:function(){return this.$11b._view},handle_touchstart:function(U){if(n.preventDefault(U),G(U)){for(var j=this,S=j.$11b,m=j.getView(),L=m.children,H=0;H<L.length;H++){var C=L[H],k=C.$24b,y=C.$25b;if(k&&k.contains(U.target))return S.scrollUp(C),j.$28b=Z(function(){j.$29b=p(function(){S.scrollUp(C)},100)},500),F(j,U),void 0;if(y&&y.contains(U.target))return S.scrollDown(C),j.$28b=Z(function(){j.$29b=p(function(){S.scrollDown(C)},100)},500),F(j,U),void 0}J&&(U=K(U)),j.$30b={x:U.pageX,y:U.pageY}}},handle_mousedown:function(E){this.handle_touchstart(E)},handle_touchend:function(Z){if(G(Z)){var $=this,R=$.$30b,i=J?{x:K(Z).pageX,y:K(Z).pageY}:{x:Z.pageX,y:Z.pageY};if(!R||b(R,i)>1)return delete $.$30b,void 0;for(var O=$.getView(),j=$.$11b,B=Z.target,g=L,V=L,W=j._items,C=O.$26b,U=0;U<C.length;U++)if(V=C[U],V.contains(B)){g=V.getAttribute("data-id");break}if(g&&W){var e=j.$17b(W,function(_){return _._id===g});if(e){var Y=!1;e.disabled instanceof Function?Y=e.disabled.call(j,e):e.disabled===!0&&(Y=!0),Y||(e.items?J&&$.$36b(V,!0):j.$1b(e,Z))}}delete $.$30b}},$36b:function(H,y){if(!v()){var c,k=this,j=k.$11b,N=k.getView(),R=j.$20b||N.children[0],s=j.$19b,x=N.$26b,J=N.children,_=H.target,f=N.getBoundingClientRect(),d=n.getWindowInfo(),X=d.width,I=d.height,r=function(e){for(var t=0;t<J.length;t++){var r=J[t],u=new RegExp(e+"$"),s=r[A];if(s&&(u.test(s)||s.indexOf(e+" ")>=0))return r}},W=function(B){for(var F=0;F<x.length;F++){var k=x[F],h=new RegExp(B+"$"),b=k[A];if(b&&(h.test(b)||b.indexOf(B+" ")>=0))return k}},u=function(d){var T=W("menu-item"+d.$45b),b=T.getBoundingClientRect(),l=b.top-f.top,O=b.left-f.left;a(d,E,l+m),a(d,i,O+b.width+m);var B=d.getBoundingClientRect(),p=B.top,n=B.left,L=B.height,U=B.width,x=p+L+2,G=n+U+2;x>I&&a(d,E,l+I-x+m),G>X&&a(d,i,O-U+m)};if(y)c=H;else{if("mouseover"===H.type){for(var o=0;o<x.length;o++){var M=x[o];if(M.contains(_)){c=M;break}}if(!c&&s){var S=s.parentNode,Z=r("submenu"+s.getAttribute("data-id"));(Z&&Z.contains(_)||S&&S.contains(_))&&(c=s)}}else if("mouseout"===H.type){for(var O=!1,t=H.relatedTarget,o=0;o<J.length;o++){var K=J[o];if("hidden"!==K.style.visibility&&K.contains(t)){O=!0;break}}if(O)return}!c&&R&&(c=W("menu-item"+(R.$45b||"NaN")))}if(c!=s){if(s)for(var l=s;l;){if(l[A]=l[A].replace(" menu-item-hover",""),l[A].indexOf("disabled")<0){var L=j.getItemByProperty("_id",l.getAttribute("data-id"));null!=L.background?L.background instanceof Function?a(l,"background-color",L.background.call(j,L)):a(l,"background-color",L.background):a(l,"background-color",n.contextMenuBackground),a(l,"color",n.contextMenuLabelColor)}var T=r("submenu"+l.getAttribute("data-id"));T&&a(T,U,"hidden");var b=l.parentNode;l=W("menu-item"+(b.$45b||"NaN"))}if(c){for(var h=c,Q=[];h;){h[A]+=" menu-item-hover",h[A].indexOf("disabled")<0&&(a(h,"background-color",n.contextMenuHoverBackground),a(h,"color",n.contextMenuHoverLabelColor));var z=r("submenu"+h.getAttribute("data-id"));z&&(a(z,U,"visible"),Q.push(z));var b=h.parentNode;h=W("menu-item"+(b.$45b||"NaN"))}Q.reverse(),Q.forEach(function(q){u(q)})}}j.$19b=c,j.$20b=c?c.parentNode:N.children[0]}},handle_mouseup:function(R){this.handle_touchend(R)},handleWindowTouchEnd:function(){var Q=this;Q.$28b!=L&&(x(Q.$28b),delete Q.$28b),Q.$29b!=L&&(H(Q.$29b),delete Q.$29b),delete Q.$34b,delete Q.$30b,delete Q.$35b},handleWindowMouseUp:function(p){this.handleWindowTouchEnd(p)},handle_mousemove:function(U){this.handle_touchmove(U)},handle_touchmove:function(e){if(!v()&&G(e)){for(var f=this,$=f.getView().children,x=L,X=0;X<$.length;X++){var c=$[X];if(c.contains(e.target)){x=c;break}}var z=f.$30b,t=J?{x:K(e).pageX,y:K(e).pageY}:{x:e.pageX,y:e.pageY};x&&z&&b(z,t)>2&&(F(f,e),f.$34b=x,f.$35b=x.$18b)}},handleWindowTouchMove:function(s){s.preventDefault();var h=this,L=h.$11b,P=h.$34b,D=h.$35b,p=h.$30b;if(p&&P){var A=J?{x:K(s).pageX,y:K(s).pageY}:{x:s.pageX,y:s.pageY},a=A.y-p.y;a>0?L.scrollUp(P,P.$18b-(D-a)):L.scrollDown(P,D-a-P.$18b)}},handleWindowMouseMove:function(_){this.handleWindowTouchMove(_)},$10b:function(x,B){x.preventDefault();for(var U=this,h=U.getView().children,g=L,w=0;w<h.length;w++){var Z=h[w];if(Z.contains(x.target)){g=Z;break}}if(g){var i=this.$11b,V=i.getRowHeight();Math.abs(B)>.05&&(B>0?i.scrollUp(g,B*V):0>B&&i.scrollDown(g,-B*V))}},handle_mousewheel:function(L){this.$10b(L,L.wheelDelta/40)},handle_DOMMouseScroll:function(h){this.$10b(h,-h.detail)},$44b:function(V){this.getView().contains(V.target)||this.$11b.hide()},$41b:function(d){this.$11b.show(d)},$4b:function(x,K){var o=this.$11b;if(K=K||o._items,K&&K.length&&x.keyCode){var $=[x.keyCode];x.shiftKey&&$.push(16),x.ctrlKey&&$.push(17),x.altKey&&$.push(18),/mac/.test(u.navigator?u.navigator.userAgent.toLowerCase():"")?x.metaKey&&$.push(17):x.metaKey&&$.push(91),$.sort();var z=$.join(),s=o.$17b(K,function(h){if(h.key){var e=h.key.slice(0);return e.sort(),z===e.join()}});if(s){s.preventDefault!==!1&&x.preventDefault();var U=!1;s.disabled instanceof Function?U=s.disabled.call(o,s):s.disabled===!0&&(U=!0),U||o.$1b(s,x)}}},$39b:function(m){var a=this,R=K(m);a.$32b={x:R.pageX,y:R.pageY}},$38b:function(C){var l=this,P=K(C);l.$31b={x:P.pageX,y:P.pageY},l.$33b=Z(function(){l.$31b&&(l.$32b?b(l.$31b,l.$32b)<10&&l.$11b.show(C):l.$11b.show(C)),delete l.$33b,delete l.$31b,delete l.$32b},600)},$40b:function(){var T=this;T.$33b!=L&&(x(T.$33b),delete T.$33b,delete T.$31b,delete T.$32b)}}),C.widget.ContextMenu=function(Z){var g=this,C=g._view=_.createView(null,g);C[A]="ht-widget-contextmenu",g.setItems(Z),g.$13b=new j(g),a(C,"font",n.contextMenuLabelFont),a(C,k,Y),a(C,"cursor","default"),a(C,"-webkit-"+T,f),a(C,"-moz-"+T,f),a(C,"-ms-"+T,f),a(C,T,f),a(C,"box-sizing","border-box"),a(C,"-moz-box-sizing","border-box"),n.baseZIndex!=L&&a(C,"z-index",R(n.baseZIndex)+2+""),g.$3b=function(q){g.$13b.$4b(q)}},W("ContextMenu",M,{$5b:0,_items:L,$21b:L,_enableGlobalKey:!1,ms_v:1,enableGlobalKey:function(){var x=this,t=x._enableGlobalKey;t===!1&&(X($(),"keydown",x.$3b),x._enableGlobalKey=!0)},disableGlobalKey:function(){this._enableGlobalKey=!1,I($(),"keydown",this.$3b)},setItems:function(n){this._items=n},getItems:function(){return this._items},setVisibleFunc:function(x){this.$16b=x},setLabelMaxWidth:function(K){this.$43b=K},$1b:function(f,l){var H=this;if("check"===f.type)f.selected=!f.selected;else if("radio"===f.type){var j=f.groupId;H.$17b(H._items,function(S){S.groupId===j&&(S.selected=!1)}),f.selected=!0}if(H.hide(),f.action)f.action.apply(f.scope||H,[f,l]);else if(f.href){var o=f.linkTarget||"_self";u.open(f.href,o)}},getItemById:function(u){return this.getItemByProperty("id",u)},setItemVisible:function(f,o){var d=this.getItemById(f);d&&(d.visible=o)},getItemByProperty:function(o,Q,V){var S=this;if(V=V||S._items,!V||0===V.length)return L;var m=S.$17b(V,function(T){return T[o]===Q});return m||L},scrollUp:function(E,r){var Q=this;if(r=r==L?20:r,r=R(r),0!==r){var v=0;E.$18b>r&&(v=E.$18b-r),Q.$42b(E,v),E.scrollTop=v,E.$18b=v}},scrollDown:function(M,w){var N=this;if(w=w==L?20:w,w=R(w),0!==w){var l=M.$22b,$=M.$23b,W=l-$;$+M.$18b+w<l&&(W=M.$18b+w),N.$42b(M,W),M.scrollTop=W,M.$18b=W}},$42b:function(x,n){n=n==L?x.$18b:n;var j=x.$24b,O=x.$25b;j&&(a(j,"top",n+m),0==n?a(j,d,f):a(j,d,"block")),O&&(a(O,"bottom",-n+m),n==x.$22b-x.$23b?a(O,d,f):a(O,d,"block"))},getRowHeight:function(){return this._view.querySelector(".menu-item").offsetHeight},$17b:function(j,W){for(var Q=0;Q<j.length;Q++){var R=j[Q];if(W(R))return R;if(R.items){var F=this.$17b(R.items,W);if(F)return F}}},$2b:function(b,G){for(var f=this,Z=0;Z<b.length;Z++){f.$5b++;var v=b[Z];if(v.visible!==!1&&!(n.isFunction(v.visible)&&v.visible()===!1||f.$16b&&!f.$16b.call(f,v))){var $=e("li"),F=f.$5b+"";if(a($,"white-space","nowrap"),a($,d,"block"),"separator"===v||v.separator===!0){var T=q();T[A]="separator",a(T,c,n.contextMenuSeparatorWidth+m),a(T,"background",n.contextMenuSeparatorColor),t($,T)}else{v._id=F,$.setAttribute("data-id",F);var J=e("span"),E=e("span"),W=g(),D=q();if(a(J,d,"inline-block"),a(J,c,"1.2em"),a(E,d,"inline-block"),a(E,c,"1.2em"),a(E,"line-height","1.2em"),W[A]="prefix",a(W,d,"inline-block"),a(W,N,"1em"),a(W,c,"1em"),a(W,"vertical-align","middle"),a(W,B,"0 0.2em"),"check"===v.type&&v.selected?W[A]+=" check-prefix":"radio"===v.type&&v.selected&&(W[A]+=" radio-prefix"),t($,W),v.icon){var H=g();H[A]="contextmenu-item-icon",a(H,d,"inline-block"),a(H,c,"1.2em"),a(H,N,"1.2em"),a(H,"margin-right","0.2em"),a(H,"float","left"),H.$50b=v.icon,H._item=v,t(J,H)}if(E[w]=v.label,t(J,E),t($,J),D[A]="suffix",a(D,d,"inline-block"),a(D,"margin-left","1em"),a(D,"margin-right","0.4em"),a(D,"text-align","right"),a(D,"font-size","75%"),v.items&&(D[w]=n.contextMenuSubmenuMark),v.suffix&&(D[w]=v.suffix),t($,D),$[A]="menu-item menu-item"+F,null!=v.background?v.background instanceof Function?a($,"background-color",v.background.call(f,v)):a($,"background-color",v.background):a($,"background-color",n.contextMenuBackground),a($,"color",n.contextMenuLabelColor),a($,y,"3px 0"),v.disabled instanceof Function){var V=v.disabled.call(f,v);V&&($[A]+=" disabled",a($,"color",n.contextMenuDisabledLabelColor))}else v.disabled&&($[A]+=" disabled",a($,"color",n.contextMenuDisabledLabelColor));if(v.items){f.$21b||(f.$21b=new C.List);var P=e("ul");P[A]="submenu"+F,P.$45b=F,a(P,U,"hidden"),a(P,k,Y),t(f._view,P),f.$21b.add(P),f.$2b(v.items,P)}}t(G,$)}}},rebuild:function(){var P=this,g=P._items,S=P._view;if(S&&(S[w]="",P.$21b=L,P.$5b=0,P.$19b=L,P.$20b=L,S.$26b=L,g&&0!==g.length)){var l=e("ul",P._r);t(S,l),P.$2b(g,l)}},addTo:function(p){if(p){var q=this,T=q.$13b;if(q.$12b=p,q.$9b=function(u){T.$44b(u)},q.$27b=function(V){T.$41b(V)},J){var z=q.$6b=function(E){T.$38b(E)},V=q.$7b=function(S){T.$39b(S)},K=q.$8b=function(s){T.$40b(s)};X(p,"touchstart",z,!0),X(p,"touchmove",V),X(p,"touchend",K)}else X(p,"contextmenu",q.$27b)}},showOnView:function(Q,Z,l){Q=Q.getView?Q.getView():Q;var H=n.getWindowInfo(),C=Q.getBoundingClientRect();this.show(C.left+H.left+Z,C.top+H.top+l)},show:function(M,l,F){var v=this,F=F==L?!0:!1,D=v._view;if(D){if(v.invalidate(),1===arguments.length){var O=M;if(J){var g=K(O);M=g.pageX,l=g.pageY}else M=O.pageX,l=O.pageY}var s=n.getWindowInfo(),G=s.width,Q=s.height,P=s.left,y=s.top,j={pageX:M,pageY:l,clientX:M-P,clientY:l-y,target:1,originEvent:O},z=j.clientX,Z=j.clientY,U=function(l){l.style.height=Q-6+m;var g=q(),e=q(),C=function(w){a(w,k,Y),a(w,"text-align","center"),a(w,N,"100%"),a(w,"font-size",10+m),a(w,"padding","2px 0"),a(w,"border","0px solid "+n.contextMenuScrollerBorderColor),a(w,"background-color",n.contextMenuScrollerColor1),w.style.backgroundImage="-webkit-linear-gradient(top, "+n.contextMenuScrollerColor1+", "+n.contextMenuScrollerColor2+")",w.style.backgroundImage="linear-gradient(to bottom, "+n.contextMenuScrollerColor1+", "+n.contextMenuScrollerColor2+")"};g[A]="menu-arrow-item menu-arrow-item-top",e[A]="menu-arrow-item menu-arrow-item-bottom",C(g),a(g,"top",V),a(g,"left",V),a(g,"border-bottom-width",1+m),g[w]="▲",C(e),a(e,"bottom",V),a(e,"left",V),a(e,"border-top-width",1+m),e[w]="▼",l.$24b=g,l.$25b=e,l.$18b=l.scrollTop,l.$22b=l.scrollHeight,l.$23b=l.clientHeight,t(l,g),t(l,e),v.$42b(l)};v.beforeShow&&v.beforeShow(j);var r=v._items;if(r&&(O&&O.preventDefault(),r.length)){v.rebuild(),n.appendToScreen(D),D.$26b=o(D,".menu-item");var e=D.children[0];e.offsetHeight>Q&&U(e);var B=Z+(F?1:0),b=z+(F?1:0),R=function(C){for(var j=0,b=0,s=0,H=v.$43b;s<C.children.length;s++){var B=C.children[s];if(B.getAttribute("data-id")){var Q=B.children[1],$=B.children[2],R=Q.children;if(H){var M=R[0];R.length>1&&(M=R[1]),M.offsetWidth>H&&(M[w]="<marquee scrollamount='3'>"+M[w]+"</marquee>",M.children[0].style.verticalAlign="text-bottom",a(M,N,H+m),a(M,d,"inline-block"))}var z=Q.offsetWidth,E=$.offsetWidth;z>j&&(j=z),E>b&&(b=E)}}for(s=0;s<C.children.length;s++){var B=C.children[s];if(B.getAttribute("data-id")){var Q=B.children[1],$=B.children[2],l=Q.children[0],t=Q.children[1];!t&&l.style.width&&a(l,N,j+m),a(Q,N,j+m),a($,N,b+m)}}};R(e);var p=Z+3+D.offsetHeight,C=z+3+D.offsetWidth;p>Q?a(D,E,B-(p-Q)+y+m):a(D,E,B+y+m),C>G?a(D,i,b-(C-G)+P+m):a(D,i,b+P+m);var H=v.$21b;H&&H.each(function(h){R(h),h.offsetHeight>Q&&U(h)}),v.$9b&&X($(),J?"touchstart":"mousedown",v.$9b,!0),v.afterShow&&v.afterShow(j),v.$47b()}}},isShowing:function(){return this._view?this._view.parentNode!=L:!1},getRelatedView:function(){return this.$12b},hide:function(){var V=this,C=V._view;C&&C.parentNode&&(O(C.parentNode,C),I($(),J?"touchstart":"mousedown",V.$9b,!0),V.afterHide&&V.afterHide())},dispose:function(){var D=this,E=D.$12b,y=D._view;y&&(y.parentNode&&O(y.parentNode,y),D.disableGlobalKey(),E&&(J?(I(E,"touchstart",D.$6b,!0),I(E,"touchmove",D.$7b),I(E,"touchend",D.$8b)):I(E,"contextmenu",D.$27b)),D._view=D._items=D.$21b=D.$19b=D.$12b=D.beforeShow=D.afterShow=D.afterHide=D.$9b=D.$3b=D.$6b=D.$7b=D.$8b=D.$27b=L)},$46b:function(I,j,B,R,o){var g=_.initContext(I);_.translateAndScale(g,0,0,1),g.clearRect(0,0,B,R),n.drawStretchImage(g,n.getImage(j),"fill",0,0,B,R,o,this),g.restore()},$47b:function(){var Y,W,B,M=this,Q=M._view;if(M.isShowing()){var d=o(Q,".check-prefix");for(B=0;B<d.length;B++){var r=d[B];Y=r.clientWidth,W=r.clientHeight,r.$48b=Y,r.$49b=W,_.setCanvas(r,Y,W)}var i=o(Q,".radio-prefix");for(B=0;B<i.length;B++){var c=i[B];Y=c.clientWidth,W=c.clientHeight,c.$48b=Y,c.$49b=W,_.setCanvas(c,Y,W)}var P=o(Q,".contextmenu-item-icon");for(B=0;B<P.length;B++){var L=P[B];Y=L.clientWidth,W=L.clientHeight,L.$48b=Y,L.$49b=W,_.setCanvas(L,Y,W)}}},validateImpl:function(){var i,x,M,h=this,Z=h._view;if(h.isShowing()){var T=o(Z,".check-prefix");for(M=0;M<T.length;M++){var O=T[M];i=O.$48b,x=O.$49b,i&&x&&h.$46b(O,n.contextMenuCheckIcon,i,x)}var D=o(Z,".radio-prefix");for(M=0;M<D.length;M++){var H=D[M];i=H.$48b,x=H.$49b,i&&x&&h.$46b(H,n.contextMenuRadioIcon,i,x)}var u=o(Z,".contextmenu-item-icon");for(M=0;M<u.length;M++){var y=u[M];i=y.$48b,x=y.$49b,i&&x&&h.$46b(y,n.getImage(y.$50b),i,x,y._item)}}}})}("undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:(0,eval)("this"),Object);